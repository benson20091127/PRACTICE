<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>登入 - 修仙文字遊戲</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@700&family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <style>
        body {
            font-family: "Ma Shan Zheng", "Noto Serif TC", "STKaiti", "微軟正黑體", serif !important;
            background: linear-gradient(135deg, #f8f4e6 0%, #e6d9b3 100%);
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            font-size: 1.35rem;
        }
        
        /* 背景圖片層 */
        body::before {
            content: '';
            position: fixed;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            opacity: 0.15;
            z-index: -1;
            pointer-events: none;
        }
        
        h2, .login-title {
            font-family: "Ma Shan Zheng", "Noto Serif TC", "STKaiti", "微軟正黑體", serif !important;
            letter-spacing: 2px;
            font-size: 3rem;
            color: #7c5c2b;
            text-shadow: 2px 2px 16px #e6d9b3, 0 0 2px #fff;
            border-bottom: 2px dashed #bfa76f;
            padding-bottom: 8px;
        }
        label, .form-label {
            font-family: "Ma Shan Zheng", "Noto Serif TC", "STKaiti", "微軟正黑體", serif !important;
            font-weight: 700;
            font-size: 1.25rem;
            color: #7c5c2b;
        }
        .btn, input, .form-control, #msg, a {
            font-family: "Ma Shan Zheng", "Noto Serif TC", "STKaiti", "微軟正黑體", serif !important;
            font-size: 1.18rem;
        }
        .container {
            border: 3px solid #bfa76f;
            border-radius: 24px;
            background: rgba(255,255,240,0.95);
            box-shadow: 0 12px 48px rgba(120,120,120,0.12);
            padding: 32px;
            margin-bottom: 32px;
        }
        .btn {
            border-radius: 24px;
            letter-spacing: 2px;
            box-shadow: 0 2px 12px rgba(180,180,180,0.15);
            border-width: 2px;
            transition: transform 0.2s, box-shadow 0.2s;
            padding: 12px 28px;
        }
        .btn-primary {
            background: linear-gradient(90deg,#fffbe6 60%,#e6d9b3 100%);
            color: #7c5c2b;
            border-color: #bfa76f;
        }
        .btn-primary:hover {
            background: #e6d9b3;
            color: #fff;
            transform: scale(1.08);
            box-shadow: 0 4px 24px rgba(120,180,255,0.25);
        }
        .form-control {
            border: 2px solid #bfa76f;
            border-radius: 12px;
            padding: 12px 16px;
            background: rgba(255,255,240,0.9);
        }
        .form-control:focus {
            border-color: #7c5c2b;
            box-shadow: 0 0 8px rgba(124,92,43,0.3);
        }
        a {
            color: #7c5c2b;
            text-decoration: none;
            font-weight: 700;
        }
        a:hover {
            color: #bfa76f;
            text-decoration: underline;
        }
    </style>
</head>
<body class="bg-light">
<!-- 古風雲霧SVG裝飾 -->
<svg class="cloud-svg" viewBox="0 0 180 120"><path fill="#bfa76f" d="M20,60 Q60,10 120,40 Q170,80 100,100 Q40,120 20,60 Z"/></svg>
<svg class="cloud-svg2" viewBox="0 0 140 90"><path fill="#bfa76f" d="M10,40 Q40,10 100,30 Q130,60 70,80 Q20,90 10,40 Z"/></svg>
<div class="container mt-5" style="max-width:420px;">
    <h2 class="mb-4 text-center login-title">會員登入</h2>
    <form id="loginForm">
        <div class="mb-3">
            <label for="username" class="form-label">帳號</label>
            <input type="text" class="form-control" id="username" name="username" required>
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">密碼</label>
            <input type="password" class="form-control" id="password" name="password" required>
        </div>
        <button type="submit" class="btn btn-primary w-100">登入</button>
    </form>
    <div id="msg" class="mt-3 text-center"></div>
    <a href="register.html" class="mt-3 d-block text-center">還沒註冊？前往註冊</a>
</div>
<script>
document.getElementById('loginForm').addEventListener('submit', function(e){
    e.preventDefault();
    const formData = new FormData(this);
    fetch('login.php', {
        method: 'POST',
        body: formData
    })
    .then(res => res.json())
    .then(data => {
        const msg = document.getElementById('msg');
        if(data.status === 1){
            msg.innerHTML = '<span class="text-success">✅ 登入成功</span>';
            setTimeout(()=>location.href='shop.html', 1000);
        }else{
            msg.innerHTML = '<span class="text-danger">❌ ' + (data.message || '登入失敗') + '</span>';
        }
    })
    .catch(()=>{document.getElementById('msg').innerHTML='<span class="text-danger">❌ 伺服器錯誤</span>';});
});
</script>
</body>
</html>
